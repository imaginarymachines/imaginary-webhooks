<?php

namespace ImaginaryMachines\Webhooks\Events;
use ImaginaryMachines\Webhooks\Plugin;
use ImaginaryMachines\Webhooks\WebhookEvent;

class {{name}} extends WebhookEvent {

public static function factory():static
	{
		return new self(
            //ID of event
			'{{id}}',
            //Name of event
			'{{ title }}',
            //Name of action
			'{{hook}}',
			3
		);
	}

    public function getPayload(array $args): array
	{
        $post = $this->getPost($args);
		$payload = [
			//Write code here please
		];
		return $payload;
	}


    protected function getPost(array $args)
	{
		if (isset($args[1]) && $args[1] instanceof \WP_Post) {
			return $args[1];
		}
		return false;
	}
	public function shouldRun(array $args): bool
	{
		$post = $this->getPost($args);
		if (is_object($post)) {
			return $post->post_type !== Plugin::CPT_NAME;
		}
		return false;
	}
}
